# Core Effects System

## ADDED Requirements

### Requirement: 星空粒子背景
系统 SHALL 使用 Three.js 渲染动态星空粒子背景，包含静态星点、闪烁效果和流星划过。

#### Scenario: 星空背景初始化
- **WHEN** 页面加载完成
- **THEN** 显示包含 200+ 星点的动态星空背景
- **AND** 星点颜色包含白色、金色、青色
- **AND** 部分星点有闪烁动画

#### Scenario: 流星效果
- **WHEN** 页面显示超过 5 秒
- **THEN** 每 5-10 秒随机出现流星划过效果
- **AND** 流星带有青色尾迹

---

### Requirement: 灵气流动效果
系统 SHALL 显示半透明的灵气流动效果，营造仙侠氛围。

#### Scenario: 灵气流动显示
- **WHEN** 页面处于活动状态
- **THEN** 显示环绕屏幕边缘的灵气丝带动画
- **AND** 灵气颜色为半透明金色
- **AND** 流动速度缓慢柔和

---

### Requirement: 鼠标跟随灵光
系统 SHALL 在鼠标移动时显示灵光跟随效果。

#### Scenario: 鼠标移动跟随
- **WHEN** 用户移动鼠标
- **THEN** 鼠标位置显示淡淡的金色光晕
- **AND** 光晕有轻微的拖尾效果

#### Scenario: 鼠标静止
- **WHEN** 鼠标停止移动超过 2 秒
- **THEN** 光晕逐渐淡出

---

### Requirement: 破碎虚空转场
系统 SHALL 在页面切换时显示破碎虚空转场效果。

#### Scenario: 页面离开转场
- **WHEN** 用户点击导航离开当前页面
- **THEN** 当前页面内容碎裂成多个三角形碎片
- **AND** 碎片向外散开并淡出
- **AND** 转场动画持续 600-800ms

#### Scenario: 页面进入转场
- **WHEN** 新页面即将显示
- **THEN** 页面内容从碎片状态重组聚合
- **AND** 伴随金色光芒效果

---

### Requirement: 境界突破特效
系统 SHALL 在滚动到重大境界突破节点时显示全屏突破动画。

#### Scenario: 触发突破特效
- **WHEN** 时间线滚动到达重大突破节点（筑基、结丹、元婴、化神等）
- **THEN** 全屏显示雷电环绕效果
- **AND** 显示金色光芒爆发
- **AND** 显示境界名称文字动画
- **AND** 播放突破音效（如果音效开启）

#### Scenario: 突破特效完成
- **WHEN** 突破动画播放完成（约 2-3 秒）
- **THEN** 特效淡出
- **AND** 恢复正常页面显示

---

### Requirement: 特效性能设置
系统 SHALL 提供特效强度设置，支持不同性能设备。

#### Scenario: 完整模式
- **WHEN** 用户选择完整特效模式
- **THEN** 显示所有粒子和动画效果
- **AND** 粒子密度为标准值

#### Scenario: 简洁模式
- **WHEN** 用户选择简洁特效模式
- **THEN** 减少粒子数量 50%
- **AND** 禁用鼠标跟随效果
- **AND** 简化转场动画
