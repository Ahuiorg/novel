# Tasks: refactor-starfield-realistic

## Phase 1: 重构星星分布

### 1.1 包围球分布
- [x] 相机放在原点 (0, 0, 0)
- [x] 星星均匀分布在球面上（半径 300-1000）
- [x] 使用球面均匀分布算法
- [x] 生成 8000 颗星星

### 1.2 星等系统
- [x] 实现 1-6 等星的分布比例（6等最多，1等最少）
- [x] 星等决定亮度和大小
- [x] 1等星：大而亮，约1%
- [x] 6等星：小而暗，约55%

### 1.3 星星颜色
- [x] 80% 白色/淡白色
- [x] 10% 蓝白色（热星）
- [x] 10% 橙红色（冷星）

## Phase 2: 改进渲染

### 2.1 清理旧代码
- [x] 移除星芒大星星相关代码
- [x] 移除流星代码
- [x] 移除 bigStarsGroup、meteorsData 等

### 2.2 优化 Points 渲染
- [x] 使用 PointsMaterial
- [x] 启用 sizeAttenuation（近大远小）
- [x] 使用 AdditiveBlending（叠加发光）

## Phase 3: 自然闪烁

### 3.1 闪烁算法
- [x] 为每颗星分配随机相位和频率
- [x] 使用多重正弦叠加产生不规则波形
- [x] 只让部分星星明显闪烁（15%）

### 3.2 实现
- [x] 在 animate() 中更新闪烁星星的颜色
- [x] 降低更新频率以提高性能

## Phase 4: 旋转和动画

### 4.1 整体旋转
- [x] 星星球体绕 Y 轴缓慢旋转
- [x] 旋转速度：约 120 秒转一圈
- [x] 轻微 X 轴旋转增加立体感

### 4.2 动画循环
- [x] 更新闪烁状态
- [x] 更新旋转角度
- [x] 渲染场景

## Phase 5: 优化和验证

### 5.1 性能优化
- [x] 合理的星星数量（8000颗）
- [x] 闪烁更新降频

### 5.2 视觉验证
- [ ] 确认始终有满天繁星
- [ ] 确认旋转流畅
- [ ] 确认闪烁自然
- [ ] 确认有明暗层次

### 5.3 清理
- [x] 删除未使用的代码
- [x] 整理注释
